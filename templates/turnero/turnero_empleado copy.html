{% extends "layout.html" %}
{% load i18n %}
{% load static %}



{% block extra_css %}
<link rel="stylesheet" href="{% static 'fullcalendar/lib/main.css' %}">
{% endblock extra_css%}



{% block turnero %}

<div id='calendario' class="container" style="padding: 20px;"></div>

<div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Seleccionar empleado
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    {% for empleado in empleados %}
    <a class="dropdown-item" href="#" data-id="{{ empleado.id }}">{{ empleado.nombre }}</a>
    {% endfor %}
  </div>
</div>


{% endblock %}






{% block scripts %}
<script src="{% static 'fullcalendar/lib/main.js' %}"></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendario');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      themeSystem: "bootstrap5",
      locales: 'es',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
      },
      events: [
        {% for turno in turnos %}
          {
          title: '{{ turno.cliente }}',
          start: '{{ turno.fecha|date:"Y-m-d" }} {{ turno.get_horario_display|slice:"0:5" }}',
          end: '{{ turno.fecha }} {{ turno.get_horario_display|slice:"8:13" }}',
          color: '{% if turno.estado == "pendiente" %}#FFC107{% elif turno.estado == "atendido" %}#4CAF50{% elif turno.estado == "cancelado" %}#F44336{% endif %}',
          // editable: true,
          display: 'block',
          },
        {% endfor %}
        ]
      });
  calendar.render();
    });
</script>

{% endblock %}

